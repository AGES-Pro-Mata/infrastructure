# Group Variables for Pro-Mata dev Environment
# Auto-generated from Terraform outputs
# Generated: Tue 09 Sep 2025 05:54:18 PM -03
---
# Environment Configuration
environment: prod
project_name: promata

# Domain Configuration
domain_name: "{{ domain_name }}"

# Infrastructure Details
resource_group_name: "rg-myproject-dev"
storage_account_name: "promatadevstg"

# Docker Swarm Configuration
swarm_manager_ip: "{{ manager_public_ip }}"
swarm_manager_private_ip: "{{ manager_private_ip }}"

# Application Configuration
app_version: latest
docker_compose_version: "v2.20.2"

# Stack Environment Variables
stack_environment:
  # Environment Settings
  ENVIRONMENT: "prod"
  environment: "prod"
  project_name: "promata"
  env_color: "blue"
  
  # Domain Configuration
  DOMAIN_NAME: "{{ domain_name }}"
  domain_name: "{{ domain_name }}"
  ACME_EMAIL: "admin@promata.com.br"
  
  # Infrastructure
  MANAGER_IP: "{{ manager_public_ip }}"
  
  # Database Configuration
  POSTGRES_DB: "promata"
  POSTGRES_USER: "postgres"
  POSTGRES_PASSWORD: "{{ vault_postgres_password }}"

  # Prisma Configuration
  DATABASE_URL: "postgresql://postgres:{{ vault_postgres_password }}@postgres:5432/promata?schema=public"
  PRISMA_DATABASE_URL: "postgresql://postgres:{{ vault_postgres_password }}@postgres:5432/promata?schema=public"
  PRISMA_USER: "postgres"
  PRISMA_PASSWORD: "{{ vault_prisma_password }}"

  # Application Security
  JWT_SECRET: "{{ vault_jwt_secret }}"
  JWT_EXPIRES_IN: "24h"

  # Traefik Configuration
  TRAEFIK_LOG_LEVEL: "INFO"
  TRAEFIK_AUTH_USERS: "{{ vault_traefik_auth_users }}"

  # Cloudflare Configuration
  CLOUDFLARE_API_TOKEN: "{{ vault_cloudflare_api_token }}"
  CLOUDFLARE_ZONE_ID: "{{ vault_cloudflare_zone_id }}"

  # Application Images
  BACKEND_IMAGE: "norohim/pro-mata-backend-dev:latest"
  FRONTEND_IMAGE: "norohim/pro-mata-frontend-dev:latest"
  DATABASE_IMAGE: "norohim/pro-mata-database-infrastructure:latest"

  # Monitoring & Tools
  GRAFANA_ADMIN_PASSWORD: "{{ vault_grafana_admin_password }}"
  PROMETHEUS_RETENTION: "7d"

  # PgBouncer Configuration
  PGBOUNCER_POOL_MODE: "session"
  PGBOUNCER_POOL_SIZE: "20"
  PGBOUNCER_MAX_CLIENT_CONN: "100"
  PGBOUNCER_AUTH_TYPE: "md5"

  # Analytics - Umami
  UMAMI_DB_PASSWORD: "{{ vault_umami_db_password }}"
  UMAMI_WEBSITE_ID: "{{ vault_umami_website_id }}"
  UMAMI_HASH_SALT: "{{ vault_umami_hash_salt }}"
  UMAMI_SECRET: "{{ vault_umami_secret }}"

  # Metabase Configuration
  METABASE_DB_PASSWORD: "{{ vault_metabase_db_password }}"
  MB_ENCRYPTION_SECRET_KEY: "{{ vault_mb_encryption_secret_key }}"

  # Backup Configuration
  BACKUP_ENCRYPTION_KEY: "{{ vault_backup_encryption_key }}"

# Monitoring Configuration
monitoring_enabled: true
backup_enabled: true

# Security Configuration
ssl_enabled: true
firewall_enabled: true
