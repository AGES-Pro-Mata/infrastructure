# Pro-Mata Stack Environment Configuration
# Environment: {{ ansible_environment | default('development') }}
# Generated: {{ ansible_date_time.iso8601 }}

# Application Configuration
DOMAIN_NAME={{ domain_name }}
ENVIRONMENT={{ ansible_environment | default('development') }}
NODE_ENV={{ 'production' if ansible_environment == 'prod' else 'development' }}

# Docker Images
BACKEND_IMAGE={{ backend_image }}
FRONTEND_IMAGE={{ frontend_image }}
DATABASE_IMAGE={{ database_image | default('promata/database:latest') }}
MIGRATE_VERSION={{ migrate_version | default('latest') }}

# Service Replicas
BACKEND_REPLICAS={{ backend_replicas | default(3) }}
FRONTEND_REPLICAS={{ frontend_replicas | default(2) }}
PGBOUNCER_REPLICAS={{ pgbouncer_replicas | default(2) }}
POSTGRES_REPLICA_COUNT={{ postgres_replica_count | default(1) }}
REDIS_REPLICAS={{ redis_replicas | default(1) }}

# Database Configuration
POSTGRES_DB={{ postgres_db }}
POSTGRES_USER={{ postgres_user }}
POSTGRES_PASSWORD={{ postgres_password }}
POSTGRES_REPLICA_USER={{ postgres_replica_user }}
POSTGRES_REPLICA_PASSWORD={{ postgres_replica_password }}

# PgBouncer Configuration
PGBOUNCER_POOL_MODE={{ pgbouncer_pool_mode | default('transaction') }}
PGBOUNCER_MAX_CLIENT_CONN={{ pgbouncer_max_client_conn | default('200') }}
PGBOUNCER_POOL_SIZE={{ pgbouncer_pool_size | default('25') }}

# Application Security
JWT_SECRET={{ jwt_secret }}
JWT_EXPIRES_IN={{ jwt_expires_in | default('1h') }}

# Traefik Configuration
LETSENCRYPT_EMAIL={{ letsencrypt_email }}
TRAEFIK_AUTH_USERS={{ traefik_auth_users }}
TRAEFIK_LOG_LEVEL={{ traefik_log_level | default('INFO') }}

# Monitoring
GRAFANA_ADMIN_PASSWORD={{ grafana_admin_password }}
GRAFANA_ADMIN_USER={{ grafana_admin_user | default('admin') }}
GRAFANA_PLUGINS={{ grafana_plugins | default('grafana-piechart-panel') }}
PROMETHEUS_RETENTION={{ prometheus_retention | default('200h') }}

# Redis Configuration
REDIS_MAXMEMORY={{ redis_maxmemory | default('256mb') }}

# Resource Limits
POSTGRES_MEMORY_LIMIT={{ postgres_memory_limit | default('2G') }}
POSTGRES_CPU_LIMIT={{ postgres_cpu_limit | default('1.5') }}
BACKEND_MEMORY_LIMIT={{ backend_memory_limit | default('512M') }}
BACKEND_CPU_LIMIT={{ backend_cpu_limit | default('0.5') }}

# Feature Flags
RUN_SEED={{ run_seed | default('false') }}
MONITORING_ENABLED={{ monitoring_enabled | default('true') }}
REDIS_ENABLED={{ redis_enabled | default('true') }}

# Backup Configuration
BACKUP_RETENTION_DAYS={{ backup_retention_days | default('30') }}
BACKUP_ENABLED={{ backup_enabled | default('true') }}